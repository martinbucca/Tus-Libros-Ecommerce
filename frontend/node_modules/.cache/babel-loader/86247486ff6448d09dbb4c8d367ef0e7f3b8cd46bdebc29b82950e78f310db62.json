{"ast":null,"code":"var _jsxFileName = \"/Users/martin/FIUBA/Ingenieria de Software I/tus-libros/frontend/src/components/MyPurchases/MyPurchases.js\";\nimport React, { Component } from \"react\";\nimport ShoppingBagIcon from '@mui/icons-material/ShoppingBag';\nimport Login from \"../Base/Login\";\nimport PropTypes from \"prop-types\";\nimport PointOfSaleIcon from '@mui/icons-material/PointOfSale';\nimport Typography from \"@mui/material/Typography\";\nimport Stack from \"@mui/material/Stack\";\nimport { Price } from \"../Base/Price\";\nimport Pluralizer from \"../../lib/Pluralizer\";\nimport PurchasesTable from \"./PurchasesTable\";\nimport { PurchasesSummeryCard } from \"./PurchasesSummeryCard\";\nimport ContinueChoosingButton from \"../Base/ContinueChoosingButton\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class MyPurchases extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      purchases: null\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.renderContinueChoosingButton(), this.renderContent()]\n    }, void 0, true);\n  }\n  renderContent() {\n    if (this._hasPurchases()) {\n      return /*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"column\",\n        alignItems: \"center\",\n        children: [this.renderPurchasesSummery(), this.renderPurchasesDetail()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 20\n      }, this);\n    } else {\n      return this.renderLogin();\n    }\n  }\n  renderContinueChoosingButton() {\n    return /*#__PURE__*/_jsxDEV(ContinueChoosingButton, {\n      onClick: () => this.props.onCloseDo()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 16\n    }, this);\n  }\n  renderLogin() {\n    return /*#__PURE__*/_jsxDEV(Login, {\n      title: 'Mis compras',\n      buttonLabel: 'Ver Compras',\n      titleIcon: /*#__PURE__*/_jsxDEV(ShoppingBagIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 24\n      }, this),\n      onLoginDo: (aClientId, aPassword) => this._listPurchases(aClientId, aPassword)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 16\n    }, this);\n  }\n  renderPurchasesSummery() {\n    return /*#__PURE__*/_jsxDEV(Stack, {\n      direction: \"row\",\n      alignItems: \"space-between\",\n      spacing: 2,\n      marginY: 5,\n      children: [this.renderPurchasesSummeryTotal(), this.renderPurchasesSummeryCount()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 16\n    }, this);\n  }\n  renderPurchasesSummeryTotal() {\n    return /*#__PURE__*/_jsxDEV(PurchasesSummeryCard, {\n      value: /*#__PURE__*/_jsxDEV(Price, {\n        value: this.state.purchases.total,\n        valueFontSize: \"2rem\",\n        currencyFontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 20\n      }, this),\n      icon: /*#__PURE__*/_jsxDEV(PointOfSaleIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 19\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 16\n    }, this);\n  }\n  renderPurchasesSummeryCount() {\n    const count = this.state.purchases.items.reduce((count, anItem) => count + anItem.quantity, 0);\n    return /*#__PURE__*/_jsxDEV(PurchasesSummeryCard, {\n      value: /*#__PURE__*/_jsxDEV(Typography, {\n        fontSize: \"2rem\",\n        children: Pluralizer.for(count, 'unidad', 'es').value()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 20\n      }, this),\n      icon: /*#__PURE__*/_jsxDEV(ShoppingBagIcon, {\n        fontSize: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 19\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 16\n    }, this);\n  }\n  renderPurchasesDetail() {\n    const hasItems = this.state.purchases.items.length > 0;\n    if (hasItems) {\n      return /*#__PURE__*/_jsxDEV(PurchasesTable, {\n        items: this.state.purchases.items\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 20\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        color: \"text.secondary\",\n        sx: {\n          flexGrow: 1\n        },\n        children: \"AÃºn no has realizado ninguna compra\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 20\n      }, this);\n    }\n  }\n  _hasPurchases() {\n    return this.state.purchases !== null;\n  }\n  _listPurchases(aClientId, aPassword) {\n    const result = this.props.app.listPurchases(aClientId, aPassword);\n    result.then(response => {\n      if (response.hasError()) {\n        this.props.notifyMessageWith(\"error\", response.message());\n      } else {\n        this.setState({\n          purchases: {\n            items: this._itemsFrom(response),\n            total: response.total()\n          }\n        });\n      }\n    });\n  }\n  _itemsFrom(response) {\n    return response.itemsCollect((isbn, quantity) => {\n      const aBook = this.props.app.bookWithIsbn(isbn);\n      return {\n        article: aBook,\n        quantity: quantity\n      };\n    });\n  }\n}\nMyPurchases.propTypes = {\n  app: PropTypes.object.isRequired,\n  onCloseDo: PropTypes.func.isRequired,\n  notifyMessageWith: PropTypes.func.isRequired\n};","map":{"version":3,"names":["React","Component","ShoppingBagIcon","Login","PropTypes","PointOfSaleIcon","Typography","Stack","Price","Pluralizer","PurchasesTable","PurchasesSummeryCard","ContinueChoosingButton","Fragment","_Fragment","jsxDEV","_jsxDEV","MyPurchases","constructor","props","state","purchases","render","children","renderContinueChoosingButton","renderContent","_hasPurchases","direction","alignItems","renderPurchasesSummery","renderPurchasesDetail","fileName","_jsxFileName","lineNumber","columnNumber","renderLogin","onClick","onCloseDo","title","buttonLabel","titleIcon","onLoginDo","aClientId","aPassword","_listPurchases","spacing","marginY","renderPurchasesSummeryTotal","renderPurchasesSummeryCount","value","total","valueFontSize","currencyFontSize","icon","fontSize","count","items","reduce","anItem","quantity","for","hasItems","length","variant","color","sx","flexGrow","result","app","listPurchases","then","response","hasError","notifyMessageWith","message","setState","_itemsFrom","itemsCollect","isbn","aBook","bookWithIsbn","article","propTypes","object","isRequired","func"],"sources":["/Users/martin/FIUBA/Ingenieria de Software I/tus-libros/frontend/src/components/MyPurchases/MyPurchases.js"],"sourcesContent":["import React, {Component} from \"react\";\nimport ShoppingBagIcon from '@mui/icons-material/ShoppingBag';\nimport Login from \"../Base/Login\";\nimport PropTypes from \"prop-types\";\n\nimport PointOfSaleIcon from '@mui/icons-material/PointOfSale';\nimport Typography from \"@mui/material/Typography\";\nimport Stack from \"@mui/material/Stack\";\nimport {Price} from \"../Base/Price\";\nimport Pluralizer from \"../../lib/Pluralizer\";\nimport PurchasesTable from \"./PurchasesTable\";\nimport {PurchasesSummeryCard} from \"./PurchasesSummeryCard\";\nimport ContinueChoosingButton from \"../Base/ContinueChoosingButton\";\n\n\nexport default class MyPurchases extends Component {\n\n    static propTypes = {\n        app: PropTypes.object.isRequired,\n        onCloseDo: PropTypes.func.isRequired,\n        notifyMessageWith: PropTypes.func.isRequired,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            purchases: null,\n        }\n    }\n\n    render() {\n        return <>\n            {this.renderContinueChoosingButton()}\n            {this.renderContent()}\n        </>\n    }\n\n    renderContent() {\n        if (this._hasPurchases()) {\n            return <Stack direction={\"column\"} alignItems={\"center\"}>\n                {this.renderPurchasesSummery()}\n                {this.renderPurchasesDetail()}\n            </Stack>\n        } else {\n            return this.renderLogin()\n        }\n    }\n\n    renderContinueChoosingButton() {\n        return <ContinueChoosingButton onClick={() => this.props.onCloseDo()} />\n    }\n\n    renderLogin() {\n        return <Login\n            title={'Mis compras'}\n            buttonLabel={'Ver Compras'}\n            titleIcon={<ShoppingBagIcon/>}\n            onLoginDo={(aClientId, aPassword) => this._listPurchases(aClientId, aPassword)}/>;\n    }\n\n    renderPurchasesSummery() {\n        return <Stack direction={\"row\"} alignItems=\"space-between\" spacing={2} marginY={5}>\n            {this.renderPurchasesSummeryTotal()}\n            {this.renderPurchasesSummeryCount()}\n        </Stack>\n    }\n\n    renderPurchasesSummeryTotal() {\n        return <PurchasesSummeryCard\n            value={<Price value={this.state.purchases.total} valueFontSize=\"2rem\" currencyFontSize=\"large\"/>}\n            icon={<PointOfSaleIcon\n                fontSize=\"large\"/>}/>\n    }\n\n    renderPurchasesSummeryCount() {\n        const count = this.state.purchases.items.reduce( (count, anItem) => count + anItem.quantity, 0)\n        return <PurchasesSummeryCard\n            value={<Typography fontSize=\"2rem\">{Pluralizer.for(count, 'unidad', 'es').value()}</Typography>}\n            icon={<ShoppingBagIcon fontSize=\"large\"/>}/>\n    }\n\n    renderPurchasesDetail() {\n        const hasItems = this.state.purchases.items.length > 0\n        if (hasItems) {\n            return <PurchasesTable items={this.state.purchases.items}/>\n        } else {\n            return <Typography variant=\"h5\" color=\"text.secondary\" sx={{ flexGrow: 1 }}>\n                {\"AÃºn no has realizado ninguna compra\"}\n            </Typography>\n        }\n    }\n\n    _hasPurchases() {\n        return this.state.purchases !== null;\n    }\n\n    _listPurchases(aClientId, aPassword) {\n        const result = this.props.app.listPurchases(aClientId, aPassword);\n        result.then((response) => {\n            if (response.hasError()) {\n                this.props.notifyMessageWith(\"error\", response.message())\n            } else {\n                this.setState({purchases: {items: this._itemsFrom(response), total: response.total()}})\n            }\n        })\n    }\n\n    _itemsFrom(response) {\n        return response.itemsCollect((isbn, quantity) => {\n            const aBook = this.props.app.bookWithIsbn(isbn);\n            return {article: aBook, quantity: quantity}\n        });\n    }\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}